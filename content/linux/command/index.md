---
tags: ["linux", "bash"]
title: "Command"
date: 2023-03-29T06:20:56Z
draft: false
---

## コンソールの起動

1. Ctel+F[2~3]
    以下のコマンドを実行することでコンソール画面からXwindowを起動することもできる
    ```
    $ startx
    ```
3. ログインするアカウント名を入力
4. passwordを入力

## X windowへの復帰
- Ctrl-Alt-F7

## コマンド停止方法

- Ctrl + C
- コマンド kill
    1. `ps r` を入力
    1. PID（プロセスID）を確認
    1. `kill [PID]` を入力
- コマンド kill②
    1. `ps  auxw | grep yes` （axでもOK）で実行しているコマンドyesのPID（2列目）を検索
    1. kill [PID]  を入力
- コマンド kill③
    1. topでPIDを確認
    1. topコマンド実行中に`k`をタイプ
    1. killしたいPIDを入力＆Enter
    1. `Send PID <PID> signal`でEnter
- `killall yes`と入力　→※同じコマンド名のものはすべてkillされる

### topコマンド

[topコマンドでよく使う or 便利そうな機能](https://qiita.com/Kernel_OGSun/items/55afb7e93b445f1be019)

<br>

## コンソール上で入出力を受け付けない際の対処法

1. Ctrl-sで入出力を受け付けなくなる
1. Ctrl-q で復帰

## aptコマンド(Ubuntu Linux等)

|コマンド|概要|
| --- | --- |
|インストールされているパッケージの一覧を表示する|$apt list --installed|
|インストールされているパッケージを最新状態にする|$apt-get update|
|パッケージをインストールする|$apt-get install package [package ...]|


## ユーザーの追加方法
```bash
$ useradd <option> <user name>
```
### オプション
- m: ホームディレクトリを追加


## パーミッション
- 権限の変更
    ```bash
    $ chmod u+w 
    ```
- ユーザー所有権の変更
    ```bash
    $ chown <user name>:<group name> <file name>
    ```
    - `<user name>:<group name>`はユーザー所有権とグループ所有権
    - グループ所有権は省略可

## パスワードの変更
```bash
$ passwd <user name>
```

## バックグラウンド処理

```
$ <command> &
```
### `&`をつけ忘れた場合
1. コマンド実行中に**Ctrl-z**でコマンドを中断
1.  - bgとタイプ　→　バックグラウンド処理に移行
    - fgとタイプ　→　コンソール上で処理を再開

## エイリアス

### エイリアスの作成
```
alias em=`emacs`
```
※ここではemという名前でemacsのエイリアスを作成


### エイリアスを無効にしてコマンドを実行
```
\<コマンド>
```

### エイリアスの確認
```
alias <エイリアス名>
```

### エイリアスの削除

1. unalias em
1. .bashrc のエイリアス設定も消去


## シンボリックリンク

ホームディレクトリにディレクトリ ~/c と ~/tmp を作成し、tmpから c へのシンボリックリンクを作成するには下記のようにする。

```
$cd
$mkdir c tmp
$cd tmp
$ln -s ../c
```

### シンボリックリンクの削除

`$unlink c` または `rm c`
※ただし `rm c` で削除する場合は `rm c/` としてしまうと元のディレクトリの中身まで削除してしまうので注意！！


## リダイレクト

`>`をリダイレクトよぶ。リダイレクトの左で実行したコマンドの標準出力が、リダイレクトの右に書い
たファイルに出力される。

(例)ls -IR の出力をファイルls-IRに書き込む
```
$ls -IR > ls-IR
```

## パイプ

`|`をパイプとよぶ。パイプの左側で実行したコマンドの標準出力が、パイプの右側のコマンドの標準入
力になる。

（例）
1. ファイルから文字列`PI`を含む行をすべて抜き出す
    ```
    $less math.h | grep IR
    ```

    【補足】math.hのファイルのパス(所在)を調べるには`locate`コマンドをインストールして使う
    ```
    $ sudo -E apt-get update
    $ sudo -E apt install mlocate
    $ locate math.h
    ```



1. ファイルの先頭から50行のみを出力する。
    ```
    head -50 <ファイル名> | less
    ```

1. ファイルの末尾50行のみを出力する。
    ```
    tail -50 <ファイル名> | less
    ```
1. CSVファイルの2列目のみを抜き出して表示する。
    ```
    $cut -f 2 -d "," retu.csv
    ```
    -f が表示する項数、-dが区切りの文字、-fと-dは基本一緒に使う

1. 2つのファイルの各行をくっつけて別のファイルに出力する。
    ```
    $paste -d " " data[1-2].txt > data3.txt
    ```
    または
    ```
    $paste -d " " data1.txt data2.txt > data3.txt
    ```


## 文字列の置換

ストリームエディタ sed を使うと、文字列の置
換を簡単にできる。あるファイル中の文字列 1 を
文字列 2 に置換した内容を出力したいときには以
下を実行する。
```
$ sed −e ”s/文字列1/文字列2/g” <ファイル名>
```

※gはすべての文字列を置換するためのオプション。これがない場合は各行で一番はじめにあった文字列1のみが置換される。

（例）
1. ファイルの空白をすべて削除
    ```
    $sed -i -e "s/ //g" ファイル名
    ```
    - -i はファイルの中身そのものの変更
    - gはすべてのマッチした文字列を置換（gの指定がなく1行に２つ以上文字がある場合は1つ目しか置換されない

1. ファイルの連続した5つのスペースをタブに変換してその結果をファイルに保存
    ```
    $sed -i -e "s/[(space)(tab)][(space)(tab)]*/[(tab)]/g" ファイル名
    ```
    ※(space)および(tab)はそれぞれスペースキー、タブキーをクリック

1. ファイルの各行のはじめ(行頭)にある空白およびタブをすべて削除する方法
    ```
    $ sed -i -e "s/^[ \t]*//" test
    ```
    ※`^`は行頭を表す

## 使用されているポートの確認
- service名から確認したい場合は
	`sudo lsof -i -P | grep <service>`
- 特定のポート番号の確認は
	`sudo lsof -i:<port>`
- ssコマンドでの確認
	`ss -atnu`

## その他の様々なコマンド

|コマンド|概要|
| --- | --- |
|locate <ファイル名>|そのファイルがシステム上のどこにあるか、一覧を表示するコマンド|
|which <コマンド>|実行されるコマンドがどこのパスにあるか表示|
|diff <file1> <file2>|ファイル1と2の違いを表示|
|cd -| もとのディレクトリに移動 |
|df|ディスク使用率を表示|
|wc <ファイル名>|ファイルに含まれる文字数や行数を表示|
|nkf -g <ファイル名>|日本語のテキストファイルの文字コードを判断|
|nkf -w <ファイル名>|テキストファイルの文字コードをUTF-8に変換|
